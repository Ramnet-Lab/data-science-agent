# Docker Setup for Data Science Agent

This document provides instructions for running the Data Science Agent using Docker.

## Prerequisites

- [Docker](https://docs.docker.com/get-docker/) installed on your system
- [Docker Compose](https://docs.docker.com/compose/install/) (included with Docker Desktop for Windows and Mac)
- OpenAI API key

## Quick Start with Docker Compose

The easiest way to run the Data Science Agent is using Docker Compose:

1. Set your OpenAI API key as an environment variable:

   ```bash
   # On Linux/macOS
   export OPENAI_API_KEY=your_openai_api_key_here
   
   # On Windows (Command Prompt)
   set OPENAI_API_KEY=your_openai_api_key_here
   
   # On Windows (PowerShell)
   $env:OPENAI_API_KEY="your_openai_api_key_here"
   ```

2. Start the application:

   ```bash
   docker-compose up
   ```

3. Access the application in your browser at [http://localhost:8502](http://localhost:8502)

4. To stop the application, press `Ctrl+C` in the terminal or run:

   ```bash
   docker-compose down
   ```

## Manual Docker Setup

If you prefer to use Docker commands directly:

1. Build the Docker image:

   ```bash
   docker build -t data-science-agent .
   ```

2. Run the container:

   ```bash
   docker run -p 8501:8501 -e OPENAI_API_KEY=your_openai_api_key_here -v $(pwd)/data:/app/data -v $(pwd)/eda_plots:/app/eda_plots data-science-agent
   ```

   On Windows, replace `$(pwd)` with `%cd%` (Command Prompt) or `${PWD}` (PowerShell). You can also change the port mapping to `-p 8502:8501` if port 8501 is already in use.

3. Access the application in your browser at [http://localhost:8502](http://localhost:8502)

## Data Persistence

The Docker setup includes two volume mounts:

- `./data:/app/data`: For storing and accessing data files
- `./eda_plots:/app/eda_plots`: For storing generated plots

Any files you place in the `data` directory on your host machine will be available inside the container. Similarly, any plots generated by the application will be saved to the `eda_plots` directory on your host machine.

## Using the Command-Line Interface

To use the command-line interface within the Docker container:

```bash
docker exec -it data-science-agent python run_analysis.py --file data/your_file.csv --objective "Your analysis objective" --api-key $OPENAI_API_KEY
```

## Troubleshooting

- **Port conflicts**: If port 8502 is already in use on your system, modify the port mapping in the `docker-compose.yml` file or the `docker run` command (e.g., change `-p 8502:8501` to `-p 8503:8501`).
- **Permission issues**: If you encounter permission issues with the volume mounts, check the ownership and permissions of the `data` and `eda_plots` directories.
- **API key issues**: Ensure your OpenAI API key is correctly set as an environment variable.

## Customization

You can customize the Docker setup by modifying the following files:

- `Dockerfile`: To change the base image, add dependencies, or modify the build process
- `docker-compose.yml`: To change port mappings, volume mounts, or add additional services
- `.dockerignore`: To exclude additional files from the Docker build context